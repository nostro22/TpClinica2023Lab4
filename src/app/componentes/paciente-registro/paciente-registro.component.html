<div class="w-100 d-flex justify-content-center"
    style="background-image: url('../../../assets/medico/appreciation_5f1y.svg'); background-size: contain; background-position: center; height: 90vh;">

    <div class="d-flex w-100 bg-primary bg-opacity-50">
        <div class="container bg-info bg-opacity-50 mt-5 rounded-3 mb-5">
            <form [formGroup]="formularioRegistroUsuario" (ngSubmit)="registrarPaciente()">
                <div class="row">
                    <div class="col-md-12 mb-5">
                        <h2 class="text-white fw-bold">Formulario de Registro Paciente</h2>
                    </div>
                </div>
                <div class="row formulario">
                    <div class=" d-flex justify-content-center">
                        <div class="col-md-3  pb-5 d-flex justify-content-center">
                            <div
                                class="d-flex flex-column justify-content-center text-center bg-warning bg-opacity-50 p-2 rounded-3">

                                <div style="width: 8rem;" (click)="onFileDivClick()" id="foto1circular"
                                    class=" card circle-card bg-info bg-opacity-50">
                                    <div class=" bg-info bg-opacity-50">
                                        <img *ngIf="foto1Url" [src]="foto1Url"
                                            class="card-img-top circle-card img-fluid " alt="Foto de perfil principal">
                                        <img *ngIf="!foto1Url" src="../../../assets/user.png"
                                            class="card-img-top circle-card img-fluid " alt="Foto de perfil principal">
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <h3 class="">Foto Perfil</h3>
                                </div>
                            </div>
                            <div class="visually-hidden">
                                <input #fileInput type="file" formControlName="foto1"
                                    class="form-control btn btn-primary " id="foto1"
                                    placeholder="Carge foto de perfil principal"
                                    (change)="onFileSelected($event, 'foto1')">
                                <small
                                    *ngIf="formularioRegistroUsuario.controls.foto1.errors?.['required'] && formularioRegistroUsuario.controls.foto1.touched"
                                    class="invalid">Cargar foto principal es requerido</small>

                            </div>
                        </div>

                        <div class="col-md-3  pb-5 d-flex justify-content-center">
                            <div
                                class="d-flex flex-column justify-content-center text-center bg-warning bg-opacity-50 p-2 rounded-3">

                                <div style="width: 8rem;" (click)="onFileDivClick2()" id="foto2circular"
                                    class=" card circle-card bg-info bg-opacity-50">
                                    <div class=" bg-info bg-opacity-50">
                                        <img *ngIf="foto2Url" [src]="foto2Url"
                                            class="card-img-top circle-card img-fluid "
                                            alt="Foto de perfil secuundaria">
                                        <img *ngIf="!foto2Url" src="../../../assets/user.png"
                                            class="card-img-top circle-card img-fluid " alt="Foto de perfil secundaria">
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <h3 class="">Foto Secundaria</h3>
                                </div>
                            </div>
                            <div class="visually-hidden">
                                <input #fileInput2 type="file" formControlName="foto2"
                                    class="form-control btn btn-primary " id="foto2"
                                    placeholder="Carge foto de perfil secundaria"
                                    (change)="onFileSelected($event, 'foto2')">
                                <small
                                    *ngIf="formularioRegistroUsuario.controls.foto2.errors?.['required'] && formularioRegistroUsuario.controls.foto2.touched"
                                    class="invalid">Cargar foto secundaria es requerido</small>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 ">
                        <label for="nombre" class="form-label">Nombre</label>
                        <input formControlName="nombre" type="text" class="form-control" id="nombre"
                            placeholder="Ingrese nombre">
                        <small
                            *ngIf="formularioRegistroUsuario.controls.nombre.errors?.['required'] && formularioRegistroUsuario.controls.nombre.touched"
                            class="invalid">
                            El nombre es requerido
                        </small>
                        <small class="invalid"
                            *ngIf="formularioRegistroUsuario.controls.nombre.errors?.['containsSpaces'] &&formularioRegistroUsuario.controls.nombre.touched">
                            El nombre no puede contener espacios
                        </small>
                    </div>
                    <div class="col-md-4 ">
                        <label for="apellido" class="form-label">Apellido</label>
                        <input formControlName="apellido" type="text" class="form-control" id="apellido"
                            placeholder="Ingrese apellido">
                        <small *ngIf="formularioRegistroUsuario.controls.apellido.errors?.['required'] &&
        formularioRegistroUsuario.controls.apellido.touched" class="invalid">
                            El apellido es requerido
                        </small>
                        <small class="invalid"
                            *ngIf="formularioRegistroUsuario.controls.apellido.errors?.['containsSpaces'] &&formularioRegistroUsuario.controls.apellido.touched">
                            El apellido no puede contener espacios
                        </small>
                    </div>
                    <div class="col-md-4 ">
                        <label for="dni" class="form-label">DNI</label>
                        <input formControlName="dni" type="number" class="form-control" id="dni"
                            placeholder="Ingrese dni">
                        <small *ngIf="formularioRegistroUsuario.controls.dni.errors?.['required'] &&
        formularioRegistroUsuario.controls.dni.touched" class="invalid">DNI es requerido</small>
                        <small *ngIf="formularioRegistroUsuario.controls.dni.errors?.['pattern'] &&
        formularioRegistroUsuario.controls.dni.touched" class="invalid">Formato de DNI incorrecto</small>
                    </div>
                    <div class="col-md-4 ">
                        <label for="edad" class="form-label">Edad</label>
                        <input formControlName="edad" type="number" class="form-control" id="edad"
                            placeholder="Ingrese edad">
                        <small *ngIf="formularioRegistroUsuario.controls.edad.errors?.['required'] &&
        formularioRegistroUsuario.controls.edad.touched" class="invalid">La edad es requerida</small>
                        <small *ngIf="formularioRegistroUsuario.controls.edad.errors?.['min'] &&
        formularioRegistroUsuario.controls.edad.touched" class="invalid">debe ser mayor de edad</small>
                        <small *ngIf="formularioRegistroUsuario.controls.edad.errors?.['max'] &&
        formularioRegistroUsuario.controls.edad.touched" class="invalid">No puede ser momia</small>
                    </div>
                    <div class="col-md-6 ">
                        <label for="obraSocial" class="form-label">Obra Social</label>
                        <input type="text" formControlName="obraSocial" class="form-control" id="obraSocial"
                            placeholder="Seleccione obraSocial">
                        <small
                            *ngIf="formularioRegistroUsuario.controls.obraSocial.errors?.['required'] && formularioRegistroUsuario.controls.obraSocial.touched"
                            class="invalid">El nro obraSocial es requerido</small>
                    </div>

                    <div class="col-md-4 mb-5 ">
                        <label for="email" class="form-label">Email</label>
                        <input formControlName="email" type="email" class="form-control" id="email"
                            placeholder="Ingrese email">
                        <small *ngIf="formularioRegistroUsuario.controls.email.errors?.['required'] &&
          formularioRegistroUsuario.controls.email.touched" class="invalid">El email es requerido</small>
                        <small *ngIf="formularioRegistroUsuario.controls.email.errors?.['email'] &&
          formularioRegistroUsuario.controls.email.touched" class="invalid">
                            Formato de mail incorrecto
                        </small>
                    </div>
                    <div class="col-md-4 mb-2">
                        <label for="clave" class="form-label">Clave</label>
                        <input formControlName="clave" type="password" class="form-control" id="clave"
                            placeholder="Ingrese clave">
                        <small *ngIf="formularioRegistroUsuario.controls.clave.errors?.['minlength'] &&
        formularioRegistroUsuario.controls.clave.touched" class="invalid">
                            Minimo 6 letras
                        </small>
                        <small *ngIf="formularioRegistroUsuario.controls.clave.errors?.['required'] &&
      formularioRegistroUsuario.controls.clave.touched" class="invalid">Contraseña es requerido</small>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 mb-5">
                        <div class="col-6 d-flex justify-content-center aling-items-center">
                            <div class="deformed-text">
                                {{capchaValorGenerado}}
                            </div>
                            <div>
                                <label for="capcha" class="form-label" for="capcha">
                                    Ingrese captcha
                                </label>
                                <input formControlName="capcha" type="text" class="form-control" id="capcha">
                                <div *ngIf=" captchaNoValido() && formularioRegistroUsuario.controls.capcha.touched"
                                    class="invalid">
                                    Debe coincidir el captcha
                                </div>
                                <div *ngIf="formularioRegistroUsuario.controls.capcha.errors?.['required'] &&
                                        formularioRegistroUsuario.controls.capcha.touched" class="invalid">
                                    Es necesario completar el captcha
                                </div>
                            </div>
                        </div>
                        <div class="form-check">
                            <input formControlName="terminos" type="checkbox" class="form-check-input" id="terminos">
                            <label for="recordar" class="form-check-label" for="terminos">
                                Aceptar términos y condiciones
                            </label>
                            <div *ngIf="formularioRegistroUsuario.controls.terminos.errors?.['required'] &&
            formularioRegistroUsuario.controls.terminos.touched" class="invalid">Es necesario aceptar terminos</div>
                        </div>
                    </div>
                    <div class="col-md-12 d-grid gap-2">
                        <button
                            [disabled]="formularioRegistroUsuario.invalid || !formularioRegistroUsuario.controls.terminos.value ||  captchaNoValido()"
                            type="submit" class="btn btn-primary btn-block">
                            Aceptar
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>